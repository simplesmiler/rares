#!/usr/bin/env node

async function main() {
  const commands = ['dev', 'console'];
  const command = process.argv[2];
  const args = process.argv.slice(3);

  if (!command || !commands.includes(command)) {
    // @TODO: display usage
    console.warn(`Try "tales dev" or "tales console"`);
    return false;
  }

  return await require('./tales-' + command)(args);
}

/* eslint-disable no-process-exit */
main()
  .then(ok => {
    process.exit(ok ? 0 : 1);
  })
  .catch(err => {
    console.error(err);
    process.exit(1);
  });
/* eslint-enable no-process-exit */
